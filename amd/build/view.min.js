/**
 * Javascript Module to handle changes which are made to the course > edit settings
 * form as the user changes various options
 * e.g. if user deselects one item, this deselects another linked one for them
 * if the user picks an invalid option it will be detected by format_tiles::edit_form_validation (lib.php)
 * but this is to help them avoid triggering that if they have JS enabled
 *
 * Plugin version and other meta-data are defined here.
 *
 * @package     format_menutab
 * @copyright   2022 UIT Innovation  <thibaud@yorku.ca>
 * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 *  */ define(["jquery","core/config"],function(e,t){return{init:function(){e(document).ready(function(){if(e("#page-course-view-menutab").length&&!e("#format_menutab_grid").length){let i=function e(){for(var t,i=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<n.length;a++)t=n[a].split("="),i.push(t[0]),i[t[0]]=t[1];return i}().id,n='<div style="float: right;">&nbsp;&nbsp;\n                    <a href="#"\n                    title="Grid view" data-view="grid" data-course="'+(i=i.replace("#",""))+'" class="btn_grid_list_view">\n                        <i class="fa fa-th" style="font-size:0.9em"></i></a>\n                </div>';e(".page-header-headings").closest("div").find("h1").append(n)}e(".btn_grid_list_view").on("click",function(){let i=e(this).data("view"),n=e(this).data("course");"grid"==i?e.ajax({url:t.wwwroot+"/course/format/menutab/update_view.php?course="+n+"&table_contents=0",success:function(){location.reload()}}):e.ajax({url:t.wwwroot+"/course/format/menutab/update_view.php?course="+n+"&table_contents=1",success:function(){location.reload()}})}),setTimeout(function(){let t;t=e("#number-of-sections-to-show").val(),e(".courseindex-section").each(function(i,n){e(this).data("number")>t&&e(this).hide()})},1e3)})}}});